(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{90034:function(e,t,s){Promise.resolve().then(s.bind(s,50703))},50703:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(3827),r=s(64090),n=s(27815),l=s(48219),d=s(34059),i=s(26490),c=s(98998),o=s(29733),u=s(4697),x=s(77819),m=s(94830),f=s(38333),h=s(23356),j=s(22983),g=s(85758),p=s(50156),N=s(81433),b=s(73026);function v(){let[e,t]=(0,r.useState)({revenue:0,totalLeads:0,pendingOnboarding:0,issues:0,activity:[],chartData:[],statusBreakdown:[]}),[s,v]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/admin/stats"),s=await e.json();void 0!==s.revenue&&t(s)}catch(e){console.error(e)}finally{v(!1)}})()},[]),s)?(0,a.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading Dashboard..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Command Center"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Real-time business metrics"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(y,{title:"Total Revenue",value:"₹".concat(Number(e.revenue).toLocaleString()),icon:(0,a.jsx)(l.Z,{className:"h-4 w-4 text-muted-foreground"}),subtext:"Lifetime Volume",trend:"+12.5%"}),(0,a.jsx)(y,{title:"Total Leads",value:e.totalLeads.toString(),icon:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"}),subtext:"All time customers",trend:"+5.2%"}),(0,a.jsx)(y,{title:"Pending Onboarding",value:e.pendingOnboarding.toString(),icon:(0,a.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"}),subtext:"Paid but form not filled",trend:e.pendingOnboarding>0?"Action needed":"All clear"}),(0,a.jsx)(y,{title:"Issues",value:e.issues.toString(),icon:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"}),subtext:"Payment Failed",trend:e.issues>0?"Needs attention":"No issues"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[(0,a.jsxs)(n.Zb,{className:"col-span-4",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),"Revenue Overview (Last 7 Days)"]})}),(0,a.jsx)(n.aY,{className:"pl-2",children:e.chartData.length>0?(0,a.jsx)(x.h,{width:"100%",height:300,children:(0,a.jsxs)(m.T,{data:e.chartData,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,a.jsx)(f.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(h.K,{dataKey:"date",className:"text-xs",tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)(j.B,{className:"text-xs"}),(0,a.jsx)(g.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"},labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>["₹".concat(e),"Revenue"]}),(0,a.jsx)(p.uN,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorRevenue)"})]})}):(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No revenue data available"})})]}),(0,a.jsxs)(n.Zb,{className:"col-span-3",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5"}),"Recent Activity"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4 max-h-[300px] overflow-y-auto",children:[0===e.activity.length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent activity."}),e.activity.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mt-2 shrink-0 ".concat("delivered"===e.status?"bg-green-500":"processing"===e.status?"bg-blue-500":"paid"===e.status?"bg-purple-500":"payment_failed"===e.status?"bg-red-500":"bg-gray-500")}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium leading-none",children:[e.customer_name||"Unknown Customer",(0,a.jsxs)("span",{className:"text-muted-foreground font-normal",children:[" - ",e.status.replace("_"," ")]})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Order #",(null===(s=e.razorpay_order_id)||void 0===s?void 0:s.slice(-6))||e.id," • ",new Date(e.created_at).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"font-medium text-sm",children:["₹",Number(e.amount).toLocaleString()]})]},t)})]})})]})]}),e.statusBreakdown.length>0&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Order Status Breakdown"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(x.h,{width:"100%",height:200,children:(0,a.jsxs)(N.v,{data:e.statusBreakdown,children:[(0,a.jsx)(f.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(h.K,{dataKey:"status",className:"text-xs"}),(0,a.jsx)(j.B,{className:"text-xs"}),(0,a.jsx)(g.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),(0,a.jsx)(b.$Q,{dataKey:"count",fill:"#3b82f6",radius:[8,8,0,0]})]})})})]})]})}function y(e){let{title:t,value:s,icon:r,subtext:l,trend:d}=e;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:t}),r]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:l}),d&&(0,a.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 font-medium",children:d})]})]})}},27815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return d},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return i}});var a=s(3827),r=s(64090),n=s(1657);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(75504),r=s(51367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[2150,5870,1328,2971,8069,1744],function(){return e(e.s=90034)}),_N_E=e.O()}]);