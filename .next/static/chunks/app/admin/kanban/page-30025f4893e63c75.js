(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3344],{1360:function(e,r,t){Promise.resolve().then(t.bind(t,29257))},29257:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(3827),a=t(64090),i=t(31478),o=t(85754);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(87461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var s=t(97307);let d=[{id:"new_lead",label:"New Lead",color:"bg-blue-50 dark:bg-blue-900/20"},{id:"initiated",label:"Order Created",color:"bg-zinc-100 dark:bg-zinc-800"},{id:"payment_failed",label:"Payment Failed",color:"bg-red-50 dark:bg-red-900/20"},{id:"paid",label:"Paid - Pending Form",color:"bg-blue-50 dark:bg-blue-900/20"},{id:"onboarding_pending",label:"In Queue",color:"bg-yellow-50 dark:bg-yellow-900/20"},{id:"processing",label:"In Progress",color:"bg-purple-50 dark:bg-purple-900/20"},{id:"delivered",label:"Delivered",color:"bg-green-50 dark:bg-green-900/20"}];function c(){let[e,r]=(0,a.useState)([]),[t,c]=(0,a.useState)(!0),[u,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/admin/kanban"),t=await e.json();Array.isArray(t)&&r(t)}catch(e){console.error("Failed to load kanban",e)}finally{c(!1)}},p=async(t,n)=>{if(t.preventDefault(),null===u)return;let a=[...e];r(e.map(e=>e.id===u?{...e,status:n}:e)),f(null);try{(await fetch("/api/admin/kanban",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:u,newStatus:n})})).ok||(r(a),alert("Failed to update status"))}catch(e){r(a),console.error(e)}};return t?(0,n.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,n.jsx)(l,{className:"animate-spin h-8 w-8 text-primary"})}):(0,n.jsxs)("div",{className:"h-[calc(100vh-6rem)] flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Project Board"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Drag and drop cards to update status."})]}),(0,n.jsx)(o.z,{variant:"outline",size:"sm",children:"Refresh Board"})]}),(0,n.jsx)("div",{className:"flex-1 overflow-x-auto pb-4",children:(0,n.jsx)("div",{className:"flex gap-4 h-full min-w-[1200px]",children:d.map(r=>(0,n.jsxs)("div",{className:"flex-1 min-w-[280px] rounded-xl border border-zinc-200 dark:border-zinc-800 flex flex-col ".concat(r.color),onDragOver:e=>e.preventDefault(),onDrop:e=>p(e,r.id),children:[(0,n.jsxs)("div",{className:"p-3 border-b border-zinc-200/50 dark:border-zinc-700/50 flex justify-between items-center bg-white/50 dark:bg-zinc-900/50 rounded-t-xl backdrop-blur-sm",children:[(0,n.jsx)("span",{className:"font-semibold text-sm",children:r.label}),(0,n.jsx)(i.C,{variant:"secondary",className:"rounded-full h-5 px-1.5 text-[10px]",children:e.filter(e=>e.status===r.id).length})]}),(0,n.jsx)("div",{className:"p-2 flex-1 overflow-y-auto space-y-2",children:e.filter(e=>e.status===r.id).map(e=>(0,n.jsxs)("div",{draggable:!0,onDragStart:()=>f(e.id),className:"bg-white dark:bg-zinc-900 p-3 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 cursor-move hover:shadow-md transition-shadow group relative",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground",children:["#",e.razorpay_order_id?e.razorpay_order_id.slice(-6):"L".concat(e.customer_id)]}),(0,n.jsx)("span",{className:"font-bold text-xs",children:e.amount?"â‚¹".concat(Number(e.amount).toLocaleString()):"-"})]}),(0,n.jsx)("h4",{className:"font-semibold text-sm line-clamp-1",children:e.brand_name||e.customer_name}),(0,n.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-muted-foreground",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(s.Z,{className:"h-3 w-3"}),(0,n.jsx)("span",{children:new Date(e.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),(0,n.jsx)("a",{href:e.id?"/admin/orders/".concat(e.id):"/admin/leads/".concat(e.customer_id),className:"text-primary opacity-0 group-hover:opacity-100 transition-opacity hover:underline",children:"View"})]})]},e.id))})]},r.id))})})]})}},31478:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var n=t(3827);t(64090);var a=t(49769),i=t(1657);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...a}=e;return(0,n.jsx)("div",{className:(0,i.cn)(o({variant:t}),r),...a})}},85754:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var n=t(3827),a=t(64090),i=t(59143),o=t(49769),l=t(1657);let s=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(s({variant:a,size:o,className:t})),ref:r,...c})});d.displayName="Button"},1657:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var n=t(75504),a=t(51367);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},87461:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(64090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,r)=>{let t=(0,n.forwardRef)((t,o)=>{let{color:l="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:f,...m}=t;return(0,n.createElement)("svg",{ref:o,...a,width:s,height:s,stroke:l,strokeWidth:c?24*Number(d)/Number(s):d,className:["lucide","lucide-".concat(i(e)),u].join(" "),...m},[...r.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(f)?f:[f]])});return t.displayName="".concat(e),t}},97307:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(87461).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},61266:function(e,r,t){"use strict";t.d(r,{F:function(){return i},e:function(){return o}});var n=t(64090);function a(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return e=>{let t=!1,n=r.map(r=>{let n=a(r,e);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let e=0;e<n.length;e++){let t=n[e];"function"==typeof t?t():a(r[e],null)}}}}function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return n.useCallback(i(...r),r)}},59143:function(e,r,t){"use strict";t.d(r,{Z8:function(){return c},g7:function(){return u}});var n,a=t(64090),i=t(61266),o=t(3827),l=Symbol.for("react.lazy"),s=(n||(n=t.t(a,2)))[" use ".trim().toString()];function d(e){var r;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r}function c(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...n}=e;if(d(t)&&"function"==typeof s&&(t=s(t._payload)),a.isValidElement(t)){var o,l,c;let e,s;let d=(e=null===(l=Object.getOwnPropertyDescriptor((o=t).props,"ref"))||void 0===l?void 0:l.get)&&"isReactWarning"in e&&e.isReactWarning?o.ref:(e=null===(c=Object.getOwnPropertyDescriptor(o,"ref"))||void 0===c?void 0:c.get)&&"isReactWarning"in e&&e.isReactWarning?o.props.ref:o.props.ref||o.ref,u=function(e,r){let t={...r};for(let n in r){let a=e[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?t[n]=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let n=i(...r);return a(...r),n}:a&&(t[n]=a):"style"===n?t[n]={...a,...i}:"className"===n&&(t[n]=[a,i].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==a.Fragment&&(u.ref=r?(0,i.F)(r,d):d),a.cloneElement(t,u)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName="".concat(e,".SlotClone"),r}(e),t=a.forwardRef((e,t)=>{let{children:n,...i}=e;d(n)&&"function"==typeof s&&(n=s(n._payload));let l=a.Children.toArray(n),c=l.find(m);if(c){let e=c.props.children,n=l.map(r=>r!==c?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,o.jsx)(r,{...i,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,o.jsx)(r,{...i,ref:t,children:n})});return t.displayName="".concat(e,".Slot"),t}var u=c("Slot"),f=Symbol("radix.slottable");function m(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},49769:function(e,r,t){"use strict";t.d(r,{j:function(){return o}});var n=t(75504);let a=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,i=n.W,o=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return i(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:o,defaultVariants:l}=r,s=Object.keys(o).map(e=>{let r=null==t?void 0:t[e],n=null==l?void 0:l[e];if(null===r)return null;let i=a(r)||a(n);return o[e][i]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return i(e,s,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...d}[r]):({...l,...d})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[2150,2971,8069,1744],function(){return e(e.s=1360)}),_N_E=e.O()}]);