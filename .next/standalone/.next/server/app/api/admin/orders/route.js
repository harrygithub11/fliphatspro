(()=>{var e={};e.id=2402,e.ids=[2402],e.modules={13878:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=13878,e.exports=r},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},22808:(e,r,t)=>{"use strict";t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>E,patchFetch:()=>O,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>_});var s={};t.r(s),t.d(s,{GET:()=>c,POST:()=>d});var o=t(95419),a=t(69108),i=t(99678),n=t(78070),u=t(47033);async function c(e){try{let e=await u.Z.getConnection();try{let[r]=await e.execute(`
                SELECT 
                    o.id, 
                    o.razorpay_order_id, 
                    o.amount, 
                    o.status, 
                    o.onboarding_status, 
                    o.created_at,
                    c.name as customer_name,
                    c.email as customer_email,
                    c.phone as customer_phone
                FROM orders o
                LEFT JOIN customers c ON o.customer_id = c.id
                ORDER BY o.created_at DESC
                LIMIT 100
            `);return n.Z.json(r)}finally{e.release()}}catch(e){return console.error("Fetch Orders Error:",e),n.Z.json({error:"Failed to fetch orders"},{status:500})}}async function d(e){try{let e=await u.Z.getConnection();try{let r;let[t]=await e.execute("SELECT id FROM customers ORDER BY RAND() LIMIT 1");if(0===t.length){let[t]=await e.execute("INSERT INTO customers (name, email) VALUES ('Test User', 'test@example.com')");r=t.insertId}else r=t[0].id;let s=`order_${Math.random().toString(36).substring(7)}`;return await e.execute("INSERT INTO orders (customer_id, razorpay_order_id, amount, status, currency) VALUES (?, ?, ?, ?, ?)",[r,s,Math.floor(1e4*Math.random())+500,"paid","INR"]),n.Z.json({success:!0})}finally{e.release()}}catch(e){return console.error("Create Order Error:",e),n.Z.json({success:!1},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/orders/route",pathname:"/api/admin/orders",filename:"route",bundlePath:"app/api/admin/orders/route"},resolvedPagePath:"C:\\Users\\MISHTY5626\\Desktop\\Webhost\\newyearlp\\app\\api\\admin\\orders\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:x,headerHooks:h,staticGenerationBailout:_}=p,E="/api/admin/orders/route";function O(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},47033:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=t(63069).createPool({host:process.env.DB_HOST||"127.0.0.1",port:parseInt(process.env.DB_PORT||"3307"),user:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"admin",database:process.env.DB_NAME||"newyear",waitForConnections:!0,connectionLimit:10,queueLimit:0})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,3069],()=>t(22808));module.exports=s})();